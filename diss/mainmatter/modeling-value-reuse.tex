% Copyright (c) 2017, Gabriel Hjort Blindell <ghb@kth.se>
%
% This work is licensed under a Creative Commons 4.0 International License (see
% LICENSE file or visit <http://creativecommons.org/licenses/by/4.0/> for a copy
% of the license).

\chapter{Modeling Value Reuse}

\section{Match Duplication}

\paragraph{Variables}
\paragraph{Constraints}

\section{Alternative Values}

\paragraph{Variables}

\paragraph{Constraints}

\begin{equation}
  \begin{array}{c}
    \mVar{dplace}[\hlDiff{\mVar{alt}[p]}[1pt]] \in \mDom(\mVar{oplace}[o]) \\
    \forall m \in \mMatchCompSet{\mPhi},
    \forall \hlDiff{p} \in \mUses(m),
    \forall o \in \mCovers(m)
  \end{array}
  \labelEquation{dom-alt}
\end{equation}

\begin{equation}
  \begin{array}{c}
    \mVar{sel}[m]
    \mImp
    \mVar{dplace}[\hlDiff{\mVar{alt}[p]}[1pt]] \in
      \mSet{\mVar{oplace}[o]} \cup \mSpans(m) \\
    \forall m \in \mMatchSet,
    \forall \hlDiff{p} \in \mDefines(m),
    \forall o \in \mCovers(m)
  \end{array}
  \labelEquation{spanning-alt}
\end{equation}

\begin{equation}
  \begin{array}{c}
    \mVar{sel}[m]
    \mImp
    \mVar{loc}[\hlDiff{\mVar{alt}[p]}[1pt]] \in \mStores(m, p) \\
    \forall m \in \mMatchSet,
    \forall \hlDiff{p} \in
      \hlDiff{\mOperandSet} \;\text{s.t.}
      \mStores(m, \hlDiff{p}) \neq \mEmptySet
  \end{array}
  \labelEquation{valid-locations-alt}
\end{equation}

\begin{equation}
  \begin{array}{c}
    \mVar{sel}[m]
    \mImp
    \mVar{loc}[\hlDiff{\mVar{alt[p]}}[1pt]] = \mNullLocation \\
    \forall m \in \mMatchSet,
    \forall \hlDiff{p} \in \mIntValues(m)
  \end{array}
  \labelEquation{locs-of-intermediate-values-alt}
\end{equation}

\begin{equation}
  \begin{array}{c}
    \mVar{sel}[m]
    \mEq
    \mVar{inactive}[\mVar{alt}[p]] \\
    \forall m \in \mMatchSet[\mKill],
    \forall p \in \mDefines(m)
  \end{array}
  \labelEquation{inactivity-when-killed}
\end{equation}

\begin{equation}
  \begin{array}{c}
    \mVar{sel}[m]
    \mImp
    \neg \mVar{inactive}[\mVar{alt}[p]] \\
    \forall m \in \mMatchCompSet{\mKill},
    \forall p \in \mUses(m)
  \end{array}
  \labelEquation{inactivity-when-used}
\end{equation}

\section{Discussion}
